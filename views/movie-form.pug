extends layout 

include ./movie.pug
include ./person-form.pug
block content
  form.page-form(action='/movie/form' method='POST')
    label(for='title') Titre du film :
    input#title(type='text' name='title' value=movie?movie.title:'' required)
    label(for='director') Réalisateur :
    select#director(name='director_id')
      option(value=null) -- Sélectionner un réalisateur --
      each person in persons 
        if (movie && movie.director && person._id.toString() === movie.director._id.toString())
          option(value=person._id selected) #{person.name}
        else 
          option(value=person._id) #{person.name}
    label(for='rating') Avis :
    input#rating(type='range' name='rating' value=movie?movie.rating:3 min='1' max='5')
    button(type='submit') Prévisualiser
    - if (preview)
      button(type='submit' formaction='/movie/create') Ajouter ce film à la base de données
  
  +person_form

  - if (preview)
    section#affiche.alaffiche
      h2 Prévisualisation
      
      +movie_detail(movie)
